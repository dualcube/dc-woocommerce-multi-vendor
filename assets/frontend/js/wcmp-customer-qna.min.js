!function(s){var a,r=function(a){t(a)||a.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},t=function(a){return a.is(".processing")||a.parents(".processing").length},e=function(a){a.removeClass("processing").unblock()};s("#cust_question").on("keyup",function(){var t=s(this).val();clearTimeout(a),a=setTimeout(function(){if(s("#qna-result-msg").html(""),r(s("#cust_qna_form")),3<t.length){var a={action:"wcmp_customer_ask_qna_handler",handler:"search",product_ID:s("#product_ID").val(),keyword:t};s.post(wcmp_customer_qna_js_script_data.ajax_url,a,function(a){e(s("#cust_qna_form")),1==a.no_data?(s("#qna-result-msg").html(a.message),s("#qna-result-wrap").html(""),0==a.is_user&&(s("#ask-wrap #ask-qna").hide(),s("#ask-wrap .no-answer-lbl").html(a.message)),s("#ask-wrap").show()):s("#qna-result-wrap").html(a.data)})}else{s("#ask-wrap").hide();a={action:"wcmp_customer_ask_qna_handler",handler:"search",product_ID:s("#product_ID").val(),keyword:""};s.post(wcmp_customer_qna_js_script_data.ajax_url,a,function(a){e(s("#cust_qna_form")),1==a.no_data?(s("#qna-result-msg").html(a.message),s("#qna-result-wrap").html(""),s("#ask-wrap").show()):(s("#qna-result-wrap").html(a.data),s("#qna-result-wrap .qna-item-wrap").not(".load-more-qna").hide(),s("#qna-result-wrap .qna-item-wrap").slice(0,4).show())})}},500)}),s("body").on("click","#ask-qna",function(){s("#qna-result-msg").html(""),r(s("#cust_qna_form"));var a={action:"wcmp_customer_ask_qna_handler",handler:"submit",customer_qna_data:s("#customerqnaform").serialize()};s.post(wcmp_customer_qna_js_script_data.ajax_url,a,function(a){0==a.no_data&&(window.location=a.redirect)})}),s("body").on("click","button.wcmp-add-qna-reply",function(){var a=s(this).attr("data-key"),t=s("#qna-reply-"+a).val();if(""===t)return!1;var n={action:"wcmp_customer_ask_qna_handler",handler:"answer",reply:t,key:a};s.post(wcmp_customer_qna_js_script_data.ajax_url,n,function(a){0==a.no_data&&window.location.reload()})}),s("body").on("click",".wcmp_vendor_question .do_verify",function(a){a.preventDefault();s(this);var t=s(this).attr("data-verification"),n=s(this).attr("data-question_id"),o=s(this).attr("data-action"),r=s(this).attr("data-product");console.log(n);var e={action:"wcmp_question_verification_approval",question_type:t,question_id:n,data_action:o,product:r};s.post(wcmp_customer_qna_js_script_data.ajax_url,e,function(a){window.location.reload()})}),s("body").on("click","button.wcmp-update-qna-answer",function(){var a=s(this).attr("data-key"),t=s("#qna-answer-"+a).val();if(""===t)return!1;var n={action:"wcmp_customer_ask_qna_handler",handler:"update_answer",answer:t,key:a};s.post(wcmp_customer_qna_js_script_data.ajax_url,n,function(a){0==a.no_data&&window.location.reload()})}),s("body").on("click",".qna-vote .give-vote-btn",function(a){a.preventDefault(),r(s("#cust_qna_form"));var t=s(this).attr("data-vote"),n=s(this).attr("data-ans");if(""===t)return!1;var o={action:"wcmp_customer_ask_qna_handler",handler:"vote_answer",vote:t,ans_ID:n};s.post(wcmp_customer_qna_js_script_data.ajax_url,o,function(a){e(s("#cust_qna_form")),0==a.no_data&&setTimeout(function(){window.location=a.redirect},1e3)})}),s("body").on("click",".non_loggedin",function(a){a.preventDefault(),s("#qna_user_msg_wrap").simplePopup()}),s(document).ready(function(){s("#qna-result-wrap .qna-item-wrap").not(".load-more-qna").hide(),s("#qna-result-wrap .qna-item-wrap").slice(0,4).show()}),s("body").on("click",".load-more-qna .load-more-btn",function(a){a.preventDefault(),s("#qna-result-wrap .qna-item-wrap:hidden").slice(0,4).slideDown(),0==s("#qna-result-wrap .qna-item-wrap:hidden").length&&(s("#qna-result-wrap .load-more-qna").fadeOut("slow"),s("#qna-result-wrap .qna-item-wrap").not(".load-more-qna").last().css("border-bottom","1px solid #e2e2e2")),s("html,body").animate({scrollTop:s(this).offset().top},1500)})}(jQuery);